<section ng-controller="TeacupsController" data-ng-init="findOne('true')">    
    <div class="row customcontainer">        
        <div class="custombanner customtitle">
            <h1 class="title">{{teacup.title}}</h1>
        </div>
        <div class="custommenu" ng-show="hasAuthorization(teacup)">
            <ul class="horizontalnav">
                <li><a href="/#!/teacups/{{teacup._id}}/edit">Edit</a></li>
                <li><a href="#" data-ng-click="remove(teacup);">Delete</a></li>
            </ul>
        </div>
        <div class="customheader">            
            <p><h3>Scheduled on {{teacup.scheduleDate | date : 'longDate'}}</h3></p>
            <p><h3>Begins at {{teacup.scheduleDate | date: 'HH:mm'}}</h3></p>
            <p>
                <h3 ng-show="teacup.speaker">Speaker is <a data-ng-href="/#!/users/{{teacup.speaker._id}}">{{teacup.speaker.name}}</a></h3>
            </p>
            <p>
                <h3 ng-show="!teacup.speaker">No speaker is defined</h3>
            </p>
            <p>
                <h3 ng-model="teacup.comments.length" ng-show="false">{{calculaterating(teacup)}}</h3>                
                <h3 ng-show="teacup.comments.length">
                    Rating:
                    <i ng-show="teacuprating[0]" class="glyphicon glyphicon-star customyellow iconpercentage"
                       ng-class="{'iconpercentage-1': teacuprating[0]>0 && teacuprating[0]<=10,
                                'iconpercentage-2': teacuprating[0]>10 && teacuprating[0]<=20,
                                'iconpercentage-3': teacuprating[0]>20 && teacuprating[0]<=30,
                                'iconpercentage-4': teacuprating[0]>40 && teacuprating[0]<=50,
                                'iconpercentage-5': teacuprating[0]>50 && teacuprating[0]<=60,
                                'iconpercentage-6': teacuprating[0]>60 && teacuprating[0]<=70,
                                'iconpercentage-7': teacuprating[0]>70 && teacuprating[0]<=80,
                                'iconpercentage-8': teacuprating[0]>80 && teacuprating[0]<=90,
                                'iconpercentage-9': teacuprating[0]>90 && teacuprating[0]<=100
                       }">
                    </i>
                    <i ng-show="teacuprating[1]" class="glyphicon glyphicon-star customyellow iconpercentage"
                       ng-class="{'iconpercentage-1': teacuprating[1]>0 && teacuprating[1]<=10,
                                'iconpercentage-2': teacuprating[1]>10 && teacuprating[1]<=20,
                                'iconpercentage-3': teacuprating[1]>20 && teacuprating[1]<=30,
                                'iconpercentage-4': teacuprating[1]>40 && teacuprating[1]<=50,
                                'iconpercentage-5': teacuprating[1]>50 && teacuprating[1]<=60,
                                'iconpercentage-6': teacuprating[1]>60 && teacuprating[1]<=70,
                                'iconpercentage-7': teacuprating[1]>70 && teacuprating[1]<=80,
                                'iconpercentage-8': teacuprating[1]>80 && teacuprating[1]<=90,
                                'iconpercentage-9': teacuprating[1]>90 && teacuprating[1]<=100
                       }">
                    </i>
                    <i ng-show="teacuprating[2]" class="glyphicon glyphicon-star customyellow iconpercentage"
                       ng-class="{'iconpercentage-1': teacuprating[2]>0 && teacuprating[2]<=10,
                                'iconpercentage-2': teacuprating[2]>10 && teacuprating[2]<=20,
                                'iconpercentage-3': teacuprating[2]>20 && teacuprating[2]<=30,
                                'iconpercentage-4': teacuprating[2]>40 && teacuprating[2]<=50,
                                'iconpercentage-5': teacuprating[2]>50 && teacuprating[2]<=60,
                                'iconpercentage-6': teacuprating[2]>60 && teacuprating[2]<=70,
                                'iconpercentage-7': teacuprating[2]>70 && teacuprating[2]<=80,
                                'iconpercentage-8': teacuprating[2]>80 && teacuprating[2]<=90,
                                'iconpercentage-9': teacuprating[2]>90 && teacuprating[2]<=100
                       }">
                    </i>
                    <i ng-show="teacuprating[3]" class="glyphicon glyphicon-star customyellow iconpercentage"
                       ng-class="{'iconpercentage-1': teacuprating[3]>0 && teacuprating[3]<=10,
                                'iconpercentage-2': teacuprating[3]>10 && teacuprating[3]<=20,
                                'iconpercentage-3': teacuprating[3]>20 && teacuprating[3]<=30,
                                'iconpercentage-4': teacuprating[3]>40 && teacuprating[3]<=50,
                                'iconpercentage-5': teacuprating[3]>50 && teacuprating[3]<=60,
                                'iconpercentage-6': teacuprating[3]>60 && teacuprating[3]<=70,
                                'iconpercentage-7': teacuprating[3]>70 && teacuprating[3]<=80,
                                'iconpercentage-8': teacuprating[3]>80 && teacuprating[3]<=90,
                                'iconpercentage-9': teacuprating[3]>90 && teacuprating[3]<=100
                       }">
                    </i>
                    <i ng-show="teacuprating[4]" class="glyphicon glyphicon-star customyellow iconpercentage"
                       ng-class="{'iconpercentage-1': teacuprating[4]>0 && teacuprating[4]<=10,
                                'iconpercentage-2': teacuprating[4]>10 && teacuprating[4]<=20,
                                'iconpercentage-3': teacuprating[4]>20 && teacuprating[4]<=30,
                                'iconpercentage-4': teacuprating[4]>40 && teacuprating[4]<=50,
                                'iconpercentage-5': teacuprating[4]>50 && teacuprating[4]<=60,
                                'iconpercentage-6': teacuprating[4]>60 && teacuprating[4]<=70,
                                'iconpercentage-7': teacuprating[4]>70 && teacuprating[4]<=80,
                                'iconpercentage-8': teacuprating[4]>80 && teacuprating[4]<=90,
                                'iconpercentage-9': teacuprating[4]>90 && teacuprating[4]<=100
                       }">
                    </i>
                    
                </h3>
                <h3 ng-show="!teacup.comments.length">No available rating yet</h3>
            </p>
            <p>
                <button class="btn btn-info" data-ng-model="teacup.subscribedusers" ng-hide="isUserSubscribed()" ng-click="subscribeuser()">Subscribe Me</button>
                <button class="btn btn-info" data-ng-model="teacup.subscribedusers" ng-show="isUserSubscribed()" ng-click="unsubscribeuser()">Unsubscribe Me</button>
            </p>
        </div>        
        <div class="customcontent">
            <p><strong>Content</strong><p>{{teacup.description}}</p>
            <p>
                <strong data-ng-show="teacup.subscribedusers && teacup.subscribedusers.length"
                        data-ng-model="teacup.subscribedusers">
                    {{teacup.subscribedusers.length}} subscriped user(s)
                </strong>
                <strong data-ng-hide="!teacup.subscribedusers || teacup.subscribedusers.length">No subscribed users</strong>
            </p>
            <ul class="disc">
                <li data-ng-repeat="user in teacup.subscribedusers"><a data-ng-href="/#!/users/{{user._id}}">{{user.name}}</a></li>
            </ul>
            <p data-ng-init="showcomments=false">
                <strong data-ng-show="teacup.comments && teacup.comments.length"
                        data-ng-model="teacup.comments">{{teacup.comments.length}} comments (
                    <a href="" ng-model="showcomments" ng-show="!showcomments" ng-click="showcomments=true"> Show</a>   
                    <a href="" ng-model="showcomments" ng-show="showcomments" ng-click="showcomments=false"> Hide</a>)
                </strong>
                <strong data-ng-hide="!teacup.comments || teacup.comments.length"
                        data-ng-model="teacup.comments">No available comments</strong>
            </p>
            <teacup-comments data-ng-if="showcomments"></teacup-comments>
            <teacup-addcomment></teacup-addcomment>
        </div>        
        <div class="customfooter customfooterdark">
            <span>created on {{teacup.created | date:'longDate'}}</span> by
            <a data-ng-href="/#!/users/{{teacup.user._id}}">{{teacup.user.name}}</a>
        </div>
    </div>
</section>
