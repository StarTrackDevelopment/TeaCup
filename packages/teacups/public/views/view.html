<section ng-controller="TeacupsController" data-ng-init="findOne('true')">    
    <div class="row customcontainer">        
        <div class="custombanner customtitle">
            <h1 class="title">{{teacup.title}}</h1>
        </div>
        <div class="custommenu" ng-show="hasAuthorization(teacup)">
            <ul class="horizontalnav">
                <li><a href="/#!/teacups/{{teacup._id}}/edit">Edit</a></li>
                <li><a href="#" data-ng-click="remove(teacup);">Delete</a></li>
            </ul>
        </div>
        <div class="customheader">            
            <p><h3>Scheduled on {{teacup.scheduleDate | date : 'longDate'}}</h3></p>
            <p><h3>Begins at {{teacup.scheduleDate | date: 'HH:mm'}}</h3></p>
            <p>
                <h3 ng-show="teacup.speaker">Speaker is <a data-ng-href="/#!/users/{{teacup.speaker._id}}">{{teacup.speaker.name}}</a></h3>
            </p>
            <p>
                <h3 ng-show="!teacup.speaker">No speaker is defined</h3>
            </p>
            <p>
                <h3 ng-model="teacup.comments.length" ng-show="teacup.comments.length">Rating: {{calculaterating(teacup)}}</h3>
                <h3 ng-show="!teacup.comments.length">No available rating yet</h3>
            </p>
            <p>
                <button class="btn btn-info" data-ng-model="teacup.subscribedusers" ng-hide="isUserSubscribed()" ng-click="subscribeuser()">Subscribe Me</button>
                <button class="btn btn-info" data-ng-model="teacup.subscribedusers" ng-show="isUserSubscribed()" ng-click="unsubscribeuser()">Unsubscribe Me</button>
            </p>
        </div>        
        <div class="customcontent">
            <p><strong>Content</strong><p>{{teacup.description}}</p>
            <p>
                <strong data-ng-show="teacup.subscribedusers && teacup.subscribedusers.length"
                        data-ng-model="teacup.subscribedusers">
                    {{teacup.subscribedusers.length}} subscriped user(s)
                </strong>
                <strong data-ng-hide="!teacup.subscribedusers || teacup.subscribedusers.length">No subscribed users</strong>
            </p>
            <ul class="disc">
                <li data-ng-repeat="user in teacup.subscribedusers"><a data-ng-href="/#!/users/{{user._id}}">{{user.name}}</a></li>
            </ul>
            <p data-ng-init="showcomments=false">
                <strong data-ng-show="teacup.comments && teacup.comments.length"
                        data-ng-model="teacup.comments">{{teacup.comments.length}} comments (
                    <a href="" ng-model="showcomments" ng-show="!showcomments" ng-click="showcomments=true"> Show</a>   
                    <a href="" ng-model="showcomments" ng-show="showcomments" ng-click="showcomments=false"> Hide</a>)
                </strong>
                <strong data-ng-hide="!teacup.comments || teacup.comments.length"
                        data-ng-model="teacup.comments">No available comments</strong>
            </p>
            <teacup-comments data-ng-if="showcomments"></teacup-comments>
            <teacup-addcomment></teacup-addcomment>
        </div>        
        <div class="customfooter customfooterdark">
            <span>created on {{teacup.created | date:'longDate'}}</span> by
            <a data-ng-href="/#!/users/{{teacup.user._id}}">{{teacup.user.name}}</a>
        </div>
    </div>
</section>
